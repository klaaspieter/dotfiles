# Account Settings -----------------------------------
set realname = "Klaas Pieter Annema"
set ssl_force_tls = yes
source ~/.mail/mailboxes
set folder = "~/.mail"
set mbox_type = "Maildir"

mailboxes +kpa-annema.me/inbox +kpa-seed.co/inbox
folder-hook kpa-annema.me/* source ~/.mutt/accounts/kpa-annema.me
folder-hook kpa-seed.co/* source ~/.mutt/accounts/kpa-seed.co

# Default to annema.me email
set spoolfile = +kpa-annema.me/inbox

# Paths ----------------------------------------------
set alias_file       = ~/.mutt/alias         # where to store aliases
set mailcap_path     = ~/.mutt/mailcap       # entries for filetypes

# Basic Options --------------------------------------
set wait_key = no        # shut up, mutt
set timeout = 3          # idle time before scanning
set mail_check = 0       # minimum time between scans
unset move               # gmail does that
set delete               # don't ask, just do
unset confirmappend      # don't ask, just do!
set quit                 # don't ask, just do!!
unset mark_old           # read/new is good enough for me
set beep_new             # bell on new mails
set pipe_decode          # strip headers and eval mimes when piping
set thorough_search      # strip headers and eval mimes before searching
set reply_to             # reply to Reply to: field
set include              # include message in replies
set forward_quote        # include message in forwards
set wrap = 80
set smart_wrap
unset markers            # hide + at the start of wrapped lines

# Colors  -------------------------------------
source ~/.mutt/solarized/mutt-colors-solarized-dark-16.muttrc

# Header Options -------------------------------------
ignore *                                # ignore all headers
unignore from: to: cc: date: subject:   # show only these
unhdr_order *                           # some distros order things by default
hdr_order from: to: cc: date: subject:  # and in this order

# Status Bar -----------------------------------------
set status_chars  = " *%A"
set status_format = "───[ Folder: %f ]───[%r%m messages%?n? (%n new)?%?d? (%d to delete)?%?t? (%t tagged)? ]───%>─%?p?( %p postponed )?───"

# Index View Options ---------------------------------
set date_format = "%m/%d"
set index_format = "[%Z]  %D  %-20.20F  %s"
set uncollapse_jump                        # don't collapse on an unread message
set sort_re                                # thread based on regex

# Group messages in threads
set sort=threads

# Sort threads like gmail
set sort_aux = reverse-last-date-received

# Key Bindings ---------------------------------
bind pager k  previous-line
bind pager j  next-line
bind pager gg top
bind pager G  bottom

bind index p recall-message
bind compose p postpone-message

macro index o "<shell-escape>offlineimap -q<enter>" "run offlineimap"

# View attachments properly.
bind attach <return> view-mailcap

# Prefer plain text over html
alternative_order text/plain text/html

# Auto convert text/html MIME type to text/plain
auto_view text/html

macro index,pager \cb "<pipe-message> urlscan<Enter>" "call urlscan to extract URLs out of a message"
macro attach,compose \cb "<pipe-entry> urlscan<Enter>" "call urlscan to extract URLs out of a message"

# Stop asking to move read messages to mbox
set move = no

# Don't ask for recipients and subject when replying
set fast_reply = yes

# Gmail-style keyboard shortcuts
bind editor <space> noop # Necessary for folders with spaces in their name
bind  index,pager c  mail # Compose
bind  generic     x  tag-entry      #Select Conversation
bind  index       x  tag-thread     #Select Conversation
bind  pager       x  tag-message    #Select Conversation
bind  index,pager a  group-reply # Reply all
bind  index,pager \# delete-thread # Delete
macro index,pager I  <set-flag>O "mark as read"
macro index,pager U  <clear-flag>O "mark as unread"
